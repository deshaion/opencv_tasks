процедура аналог imfill в матлаб.
Она берет маску и заполняет все пустоты внутри нее.
за основу взьми cvFloodFill  но там с ней придется еще повозиться..

суть закрасить все дырки. Начиная от самых больших. По идее надо получить контур и контур закрасить весь